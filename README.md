
# Установка
* создать файл .env.json из файла .env.json.example (в корне проекта)
* прописать нобходимые настроки
* запустить команду
```
make build-prod
```
* также должны быть настрены очереди RabbitMQ
* установлен memcache
* для парсинга и подготовки мемов запустить
```
php yii mem-parser/parse-page
```
## Nginx конфиг
```
server {
       charset utf-8;
       client_max_body_size 128M;
       listen 80; ## listen for ipv4
       #listen [::]:80 default_server ipv6only=on; ## listen for ipv6

       server_name meme-game.local;
       root        {dir_project};
       index       index.php;

       #access_log  /var/www/logs/meme-game/access.log;
       #error_log   /var/www/logs/meme-game/error.log;

       location / {
		root {dir_project}/frontend/web;
		try_files $uri /frontend/web/index.php?$args;
		# avoiding processing of calls to non-existing static files by Yii
		location ~ \.(js|css|png|jpg|gif|swf|ico|pdf|mov|fla|zip|rar)$ {
			access_log  on;
			expires  360d;

			try_files  $uri =404;
		}
	}


    location /upload/{
		root  {dir_project};
	}

    location ~ \.php$ {
        include snippets/fastcgi-php.conf;
        #
        #	# With php7.0-cgi alone:
        #	fastcgi_pass 127.0.0.1:9000;
        # With php7.0-fpm:
        fastcgi_pass unix:/run/php/php7.1-fpm.sock;
    }

	location ~ /\.(ht|svn|git) {
		deny all;
	}
   }

```


## Тестовый пользователь
login: user
password: user

# Игра
"Угадай мемлодию"

1. Подготовка.

1.1. Сервис собирает 1000 самых популярных мемов с http://knowyourmeme.com , в первую очередь следующие данные:
- Основную картинку
- Название
- Название в url статьи на сайте (для п. 2.3)
- Год возникновения
- Ключевые слова
- Раздел "About" статьи
Обрабатывать только мемы со статусом Confirmed.

1.2. Во время сбора данных основная картинка также дополнительно делится на сетку 16x16, каждый подобный кусок сохраняется отдельно. Также каждый кусок анализируется на пустоту, и куски не со сплошным цветом помечаются флагом.

2. Игра.

2.1. Игрок открывает фронт сервиса, где присутствует только кнопка начала игры. Игрок нажимает на кнопку.

2.2. Сервер выбирает случайный мем и стартует новую сессию (игроков, очевидно, может быть несколько в один момент времени, и у каждого своя сессия). Игрок стартует с 0 баллами.

2.3. Цель игры - угадать мем (ввести его название). Если в названии более одного слова, и допустимы вариации, нужно проверять поисковым запросом наподобие site:knowyourmeme.com ВВЕДЕННЫЙ ОТВЕТ, проверяя наличие нужной статьи на первой позиции выдачи (однако количество слов должно все же совпадать).
Допустимо также использовать свой способ определения правильности ответа.
За правильный ответ игрок получает +10 баллов.

2.4. На старте сессии игроку показывается один из кусков мозаики, сгенерированных в п. 1.2 (не пустой кусок, если таковые есть). Если игрок не готов ввести ответ, он пропускает ход, и получает следующий кусок (плюс один пустой кусок, если таковые есть). За пропуск хода игрок получает -1 балл.
Разумеется, нужно свести к минимуму возможности схитрить, получив всю картинку вне игрового процесса.

2.5. У игрока также есть возможность получить 3 вида подсказок (не более одной за ход, подсказка считается за пропуск хода и не добавляет кусок мозаики):
1 - год возникновения мема. -10 баллов, только один раз.
2 - случайное ключевое слово, не содержащееся в названии мема. -10 баллов, можно повторять, пока есть слова.
3 - случайное слово из раздела "About", не содержащееся в названии мема. -5 баллов, можно повторить, пока есть слова.

2.6. У игрока также есть возможность сдаться в любой момент.

2.7. По завершении игры показыватся полная картинка, название, счет, полный текст About, кнопка для повторной игры, и ссылка для перехода на статью на оригинальном сайте.